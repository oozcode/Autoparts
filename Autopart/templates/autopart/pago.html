{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pago</title>
  <link rel="stylesheet" href="{% static 'autopart/css/estilos.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
</head>


<body>

  <nav class="navbar">
        <a href="{% url 'index' %}" class="navbar-brand">AutoParts</a>
        <div class="nav-links">
            <a href="{% url 'catalogo' %}">Catálogo</a>
            <a href="{% url 'carrito' %}">Carrito de compras</a>
            {% if request.user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user-circle fa-2x"></i> 
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="">Perfil</a>
                            <a class="dropdown-item" href="">Cerrar Sesión</a>
                        </div>
                    </li>
            {% else %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user-circle fa-2x"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="{% url 'login' %}">Ingresar</a>
                            <a class="dropdown-item" href="{% url 'registro' %}">Registrarse</a>
                        </div>
                    </li>
            {% endif %}

        </div>
    </nav>
    
  <div class="container my-5">
    <div class="row">
      <!-- Formulario de facturación -->
      <div class="col-md-7 form-section">
        <h4>Detalles de facturación</h4>
        <form>
          

          <div class="row mb-3">
            <div class="col">
              <label for="rut" class="form-label">RUT</label>
              <input type="text" class="form-control" id="rut" placeholder="12345678-9" required>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" required>
            </div>
            <div class="col">
              <label for="apellidos" class="form-label">Apellidos</label>
              <input type="text" class="form-control" id="apellidos" required>
            </div>
          </div>

          <div class="mb-3">
            <label for="region" class="form-label">Región</label>
            <select id="region" class="form-select" required>
              <option value="">Seleccione una región</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="comuna" class="form-label">Comuna</label>
            <select id="comuna" class="form-select" required>
              <option value="">Seleccione una comuna</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="calle" class="form-label">Nombre de la Calle</label>
            <input type="text" class="form-control" id="calle" required>
          </div>

          <div class="mb-3">
            <label for="numero" class="form-label">Número</label>
            <input type="text" class="form-control" id="numero">
          </div>

          <div class="mb-3">
            <label for="complemento" class="form-label">Complemento (opcional)</label>
            <input type="text" class="form-control" id="complemento">
          </div>

          <div class="row mb-3">
            <div class="col">
              <label for="email" class="form-label">Correo electrónico</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="col">
              <label for="telefono" class="form-label">Teléfono</label>
              <input type="tel" class="form-control" id="telefono" required>
            </div>
          </div>
        </form>
      </div>

      <!-- Resumen del pedido -->
      <div class="col-md-5 order-summary">
  <h4>Tu pedido</h4>
  <div id="cartItems" class="mb-3">
    <!-- Productos se insertan aquí con JS -->
  </div>

  <!-- Subtotal -->
  <div class="d-flex justify-content-between mb-2">
    <span>Subtotal</span>
    <span id="subtotal"></span>
  </div>

 <!-- Envío -->
<div class="d-flex justify-content-between mb-2">
  <span>Envío</span>
  <span id="envio">$0</span>
</div>

<!-- Agrega este botón oculto para calcular el envío -->
<button id="calcularEnvio" style="display: none;"></button>

  <!-- Total -->
  <div class="d-flex justify-content-between mt-3">
    <span class="fw-bold">Total</span>
    <span class="fw-bold" id="totalFinal"></span>
  </div>
  <div class="text-muted" style="font-size: 0.9em;">
    Incluye <span id="impuestos"></span> de impuestos
  </div>
</div>

  </script>
  <script src="{% static 'autopart\js\regiones_comunas_api.js' %}"></script>

</body>

</html>
