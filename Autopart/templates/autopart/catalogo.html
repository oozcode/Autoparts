{% extends '../autopart/base/header.html' %}
{% load static %}
{% block title %}Catálogo - AutoParts{% endblock %}
{% block content %}
<main>
    <div class="category-header">
        <h1>Catálogo Completo</h1>
    </div>

    {% for categoria in categorias %}
        <section class="category-section">
            <h2>{{ categoria.nombre }}</h2>
            <div class="products-grid">
                {% for producto in categoria.productos.all %}
                    <div class="product-card" data-product-id="{{ producto.id }}">
                        <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                        <h3>{{ producto.nombre }}</h3>
                        <p class="description">{{ producto.descripcion }}</p>
                        <p class="price">${{ producto.precio }}</p>
                        <button class="add-to-cart">Agregar al carrito</button>
                    </div>
                {% empty %}
                    <p>No hay productos en esta categoría.</p>
                {% endfor %}
            </div>
        </section>
    {% empty %}
        <p>No hay categorías disponibles.</p>
    {% endfor %}
</main>

<div id="cart-toast" class="cart-toast hidden">
  <div class="toast-content">
    <span id="toast-close" class="toast-close">&times;</span>
    <img id="toast-img" src="" alt="Producto" />
    <div class="toast-info">
      <h4 id="toast-name"></h4>
      <p id="toast-desc"></p>
    </div>
    <button onclick="window.location.href='/carrito/'" class="toast-btn">
      Ver carrito (<span id="toast-count">0</span>)
    </button>
  </div>
</div>

<script src="{% static 'autopart/js/cart.js' %}"></script>
<link rel="stylesheet" href="{% static 'autopart/css/componentes/navcarro.css' %}">
{% endblock %}
