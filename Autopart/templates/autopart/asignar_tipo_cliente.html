{% extends 'autopart/base/header.html' %}
{% block content %}
  <h2>Lista de Clientes</h2>
  <table id="clientes-table" class="table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Email</th>
        <th>Tipo Cliente</th>
        <th>Tel√©fono</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    fetch('/api/clientes/')
      .then(response => response.json())
      .then(data => {
        const tbody = document.querySelector('#clientes-table tbody');
        data.forEach(cliente => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${cliente.user_first_name} ${cliente.user_last_name}</td>
            <td>${cliente.user_email}</td>
            <td>${cliente.tipo_cliente || 'Sin asignar'}</td>
            <td>${cliente.telefono}</td>
            <td><a href="/admin/asignar-tipo/${cliente.id}/" class="btn btn-sm btn-primary">Asignar</a></td>
          `;
          tbody.appendChild(tr);
        });
      });
  </script>
{% include 'autopart/base/footer.html' %}
{% endblock %}
