{% extends 'autopart/base/header.html' %}
{% load formatos %}
{% load static %}

{% block title %}AutoParts - Inicio{% endblock %}

{% block content %}
<main>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>DISTRIBUIDORA DE REPUESTOS</h1>
            <p>Amplio catálogo de partes para autos</p>
            <a href="{% url 'catalogo' %}" class="cta-button">Ver Catálogo</a>
        </div>
    </section>

    <section class="categories-section">
        <h2>Categorías</h2>
        <div class="categories-grid">
            {% for cat in categorias %}
                <a href="{% url 'productos_por_categoria' categoria_slug=cat.slug %}" class="category-card">
                    <img src="{% static 'autopart/img/categoria_'|add:cat.slug|add:'.jpg' %}" alt="{{ cat.nombre }}" />
                    <h3>{{ cat.nombre }}</h3>
                </a>
            {% endfor %}
        </div>
    </section>

    <section class="best-sellers-section">
        <h2>Los Más Vendidos</h2>
        <div class="products-grid">
            {% for p in productos %}
                <div class="product-card" data-product-id="producto{{ p.id }}">
                    {% if p.img %}
                        <img src="{{ p.img.url }}" alt="{{ p.nombre }}" />
                    {% else %}
                        <img src="{% static 'autopart/img/default.jpg' %}" alt="Sin imagen" />
                    {% endif %}
                    <h3>{{ p.nombre|capfirst }}</h3>
                    <p class="description">{{ p.marca }} - {{ p.descripcion }}</p>
                    {% if es_mayorista %}
                        <p class="price-minorista">Minorista: {{ producto.precio_minorista|clp }}</p>
                        <p class="price-mayorista">Mayorista: {{ producto.precio_mayorista|clp }}</p>
                    {% else %}
                        <p class="price">{{ producto.precio_minorista|clp }}</p>
                    {% endif %}

                    <button class="add-to-cart">Agregar al carrito</button>
                </div>
            {% endfor %}
        </div>
    </section>
</main>
{% include 'autopart/base/footer.html' %}
{% endblock %}
